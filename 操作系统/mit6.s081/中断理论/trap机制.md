操作系统进入trap有3种情况，中断、系统调用、异常。
进入trap发生的事情：
1. 用户态->内核态
2. 保存上下文
3. 运行相应的处理代码
4. 恢复上下文
在发生系统调用时，一般会伴随着用户态到内核态的特权转变，同时会将用户栈压入到内核栈中，对于每个进程，栈都是从高地址向低地址递增。 
#### 思考
- **思考一：中断上下文、系统调用上下文、进程上下文。这几个有什么区别吗？**
 发生上下文切换的原因有两种：中断和进程的调度程序，当然有可能硬中断也会导致进程调度程序执行（时钟中断，I/O磁盘会将进程状态改成Sleep，从而进入进程调度程序）。
 所以上下文应该不是这样分类的，操作系统通过中断的机制，包括软中断和硬中断，系统调用就是软中断的一种实现方式，硬中断是硬件产生的中断，发生硬中断会跳到相应的设备驱动管理程序处理中断请求。这就是硬中断，发生硬中断一般都会伴随着进程切换，但是发生中断时要保存上下文，发生进程切换也要保存上下文。系统调用是软中断的实现形式。所以，应该是这样：硬中断上下文、系统调用上下文和进程上下文。

