## 1、外部一致性、线性一致性和顺序一致性
**外部一致性**：指事务T1执行完成后，T2才启动，保证让T2看到T1的结果。
在Spanner论文中，外部一致性成为Spanner论文要解决的主要问题。
1. T1和T2的时间戳可能属于不同region的server。
2. 不同region间的server之间，时间没法严格同步，存在误差。（虽然Spanner用了很强的硬件以及算法来同步时钟，仍然不能绝对保证跨region的服务器的时钟严格同步。因为跨了延迟达到100ms的广域网）
**顺序一致性**：如果一个并发执行过程所包含的所有读写操作能够重排成一个全局有序的序列。并且这个序列满足以下两个条件，那么这个并发执行过程满足顺序一致性的。
1. 重排后的序列中每一个读操作返回的值，必须等于前面对同一个数据对象的最近一次写操作所写入的值。
2. 原来每个进程中各个操作的执行先后顺序，在这个重排后的序列中必须保持一致。
**线性一致性**： 在顺序一致性之上，多了一个条件。又称为强一致性，原子一致性
1. 重排后的序列中每一个读操作返回的值，必须等于前面对同一个数据对象的最近一次写操作所写入的值。
2. 原来每个进程中各个操作的执行先后顺序，在这个重排后的序列中必须保持一致。
3. **不同进程的操作，如果在时间上不重叠，那么他们的执行先后顺序，在这个重排后的序列中必须保持一致。**
对于第3点：要重点注意在时间不重叠，如果在时间重叠如C和D的R（x，1），两者谁在前都可以，都满足线性一致性的定义。
**例子：**
![[Pasted image 20230828162653.png]]
